<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/style.css">
    <title>Dashboard</title>
</head>
<body>
    <h2> Network</h2>
    <nav class="menu"> <span class="titre"> Dashboard </span>
        <ul>
            <li><a href="system.html"> Système status</a></li>
            <li><a href="network.html"> Network</a></li>
        </ul>
    </nav>

    <div id="dtr-graph">

        <script>
            var layout1 = {
                title: 'Download Transfer Rate',
                xaxis: {
                    title: 'Time',
                    type: 'date',  // Utilisation du type de données date
                    tickformat: '%H:%M:%S'  // Format des ticks de l'axe X pour l'heure
                },
                yaxis: {
                    title: 'Download Transfer Rate',
                    
                }
            };
    
            function updateGraph() {
                fetch('/graph/dataNetwork')
                    .then(response => response.json())
                    .then(data => {
                        
                        var bytes_received = data.network_dtr;
                        var times = data.times.map(ts => new Date(ts * 1000));
    
                        if (bytes_received.length > {{ max_points }}) {
                            
                            bytes_received = bytes_received.slice(-{{ max_points }});
                            times = times.slice(-{{ max_points }});
                        }
    
                        var dtr = bytes_received.map(u => u + "b/s")
                        var points = {
                            x: times,
                            y: bytes_received,
                            text: dtr,
                            type: 'scatter',
                            mode: 'lines+markers'
                        };
    
                        Plotly.newPlot('dtr-graph', [points], layout1);
                    });
            };
    
            setInterval(updateGraph, 2000);
            updateGraph(); // Appel initial
        </script>
    </div>
    
    
    <!-- Ajoutez le contenu de votre tableau de bord ici -->
    
</body>
</html>